"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){var t={init:function(a){var s=e.extend({items:1,itemsOnPage:1,pages:0,displayedPages:5,edges:2,currentPage:0,useAnchors:!0,hrefTextPrefix:"#page-",hrefTextSuffix:"",prevText:"Prev",nextText:"Next",ellipseText:"&hellip;",ellipsePageSet:!0,cssStyle:"light-theme",listStyle:"",labelMap:[],selectOnClick:!0,nextAtFront:!1,invertPageOrder:!1,useStartEdge:!0,useEndEdge:!0,onPageClick:function(e,t){},onInit:function(){}},a||{}),n=this;return s.pages=s.pages?s.pages:Math.ceil(s.items/s.itemsOnPage)?Math.ceil(s.items/s.itemsOnPage):1,s.currentPage?s.currentPage=s.currentPage-1:s.currentPage=s.invertPageOrder?s.pages-1:0,s.halfDisplayed=s.displayedPages/2,this.each((function(){n.addClass(s.cssStyle+" simple-pagination").data("pagination",s),t._draw.call(n)})),s.onInit(),this},selectPage:function(e){return t._selectPage.call(this,e-1),this},prevPage:function(){var e=this.data("pagination");return e.invertPageOrder?e.currentPage<e.pages-1&&t._selectPage.call(this,e.currentPage+1):e.currentPage>0&&t._selectPage.call(this,e.currentPage-1),this},nextPage:function(){var e=this.data("pagination");return e.invertPageOrder?e.currentPage>0&&t._selectPage.call(this,e.currentPage-1):e.currentPage<e.pages-1&&t._selectPage.call(this,e.currentPage+1),this},getPagesCount:function(){return this.data("pagination").pages},setPagesCount:function(e){this.data("pagination").pages=e},getCurrentPage:function(){return this.data("pagination").currentPage+1},destroy:function(){return this.empty(),this},drawPage:function(e){var a=this.data("pagination");return a.currentPage=e-1,this.data("pagination",a),t._draw.call(this),this},redraw:function(){return t._draw.call(this),this},disable:function(){var e=this.data("pagination");return e.disabled=!0,this.data("pagination",e),t._draw.call(this),this},enable:function(){var e=this.data("pagination");return e.disabled=!1,this.data("pagination",e),t._draw.call(this),this},updateItems:function(e){var a=this.data("pagination");a.items=e,a.pages=t._getPages(a),this.data("pagination",a),t._draw.call(this)},updateItemsOnPage:function(e){var a=this.data("pagination");return a.itemsOnPage=e,a.pages=t._getPages(a),this.data("pagination",a),t._selectPage.call(this,0),this},getItemsOnPage:function(){return this.data("pagination").itemsOnPage},_draw:function(){var a,s=this.data("pagination"),n=t._getInterval(s);t.destroy.call(this);var i="UL"===("function"==typeof this.prop?this.prop("tagName"):this.attr("tagName"))?this:e("<ul"+(s.listStyle?' class="'+s.listStyle+'"':"")+"></ul>").appendTo(this);if(s.prevText&&t._appendItem.call(this,s.invertPageOrder?s.currentPage+1:s.currentPage-1,{text:s.prevText,classes:"prev"}),s.nextText&&s.nextAtFront&&t._appendItem.call(this,s.invertPageOrder?s.currentPage-1:s.currentPage+1,{text:s.nextText,classes:"next"}),s.invertPageOrder){if(n.end<s.pages&&s.edges>0){if(s.useStartEdge){var l=Math.max(s.pages-s.edges,n.end);for(a=s.pages-1;a>=l;a--)t._appendItem.call(this,a)}s.pages-s.edges>n.end&&s.pages-s.edges-n.end!=1?i.append('<li class="disabled"><span class="ellipse">'+s.ellipseText+"</span></li>"):s.pages-s.edges-n.end==1&&t._appendItem.call(this,n.end)}}else if(n.start>0&&s.edges>0){if(s.useStartEdge){var r=Math.min(s.edges,n.start);for(a=0;a<r;a++)t._appendItem.call(this,a)}s.edges<n.start&&n.start-s.edges!=1?i.append('<li class="disabled"><span class="ellipse">'+s.ellipseText+"</span></li>"):n.start-s.edges==1&&t._appendItem.call(this,s.edges)}if(s.invertPageOrder)for(a=n.end-1;a>=n.start;a--)t._appendItem.call(this,a);else for(a=n.start;a<n.end;a++)t._appendItem.call(this,a);if(s.invertPageOrder){if(n.start>0&&s.edges>0&&(s.edges<n.start&&n.start-s.edges!=1?i.append('<li class="disabled"><span class="ellipse">'+s.ellipseText+"</span></li>"):n.start-s.edges==1&&t._appendItem.call(this,s.edges),s.useEndEdge))for(a=(r=Math.min(s.edges,n.start))-1;a>=0;a--)t._appendItem.call(this,a)}else if(n.end<s.pages&&s.edges>0&&(s.pages-s.edges>n.end&&s.pages-s.edges-n.end!=1?i.append('<li class="disabled"><span class="ellipse">'+s.ellipseText+"</span></li>"):s.pages-s.edges-n.end==1&&t._appendItem.call(this,n.end),s.useEndEdge))for(a=l=Math.max(s.pages-s.edges,n.end);a<s.pages;a++)t._appendItem.call(this,a);s.nextText&&!s.nextAtFront&&t._appendItem.call(this,s.invertPageOrder?s.currentPage-1:s.currentPage+1,{text:s.nextText,classes:"next"}),s.ellipsePageSet&&!s.disabled&&t._ellipseClick.call(this,i)},_getPages:function(e){return Math.ceil(e.items/e.itemsOnPage)||1},_getInterval:function(e){return{start:Math.ceil(e.currentPage>e.halfDisplayed?Math.max(Math.min(e.currentPage-e.halfDisplayed,e.pages-e.displayedPages),0):0),end:Math.ceil(e.currentPage>e.halfDisplayed?Math.min(e.currentPage+e.halfDisplayed,e.pages):Math.min(e.displayedPages,e.pages))}},_appendItem:function(a,s){var n,i,l=this,r=l.data("pagination"),p=e("<li></li>"),g=l.find("ul");n={text:(a=a<0?0:a<r.pages?a:r.pages-1)+1,classes:""},r.labelMap.length&&r.labelMap[a]&&(n.text=r.labelMap[a]),n=e.extend(n,s||{}),a==r.currentPage||r.disabled?(r.disabled||"prev"===n.classes||"next"===n.classes?p.addClass("disabled"):p.addClass("active"),i=e('<span class="current">'+n.text+"</span>")):(i=r.useAnchors?e('<a href="'+r.hrefTextPrefix+(a+1)+r.hrefTextSuffix+'" class="page-link">'+n.text+"</a>"):e("<span >"+n.text+"</span>")).click((function(e){return t._selectPage.call(l,a,e)})),n.classes&&i.addClass(n.classes),p.append(i),g.length?g.append(p):l.append(p)},_selectPage:function(e,a){var s=this.data("pagination");return s.currentPage=e,s.selectOnClick&&t._draw.call(this),s.onPageClick(e+1,a)},_ellipseClick:function(a){var s=this,n=this.data("pagination"),i=a.find(".ellipse");i.addClass("clickable").parent().removeClass("disabled"),i.click((function(a){if(!n.disable){var l=e(this),r=(parseInt(l.parent().prev().text(),10)||0)+1;l.html('<input type="number" min="1" max="'+n.pages+'" step="1" value="'+r+'">').find("input").focus().click((function(e){e.stopPropagation()})).keyup((function(a){var l=e(this).val();13===a.which&&""!==l?l>0&&l<=n.pages&&t._selectPage.call(s,l-1):27===a.which&&i.empty().html(n.ellipseText)})).bind("blur",(function(a){var l=e(this).val();return""!==l&&t._selectPage.call(s,l-1),i.empty().html(n.ellipseText),!1}))}return!1}))}};e.fn.pagination=function(a){return t[a]&&"_"!=a.charAt(0)?t[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==_typeof(a)&&a?void e.error("Method "+a+" does not exist on jQuery.pagination"):t.init.apply(this,arguments)}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYnMvcGFnaW5hdG9yLmpzIl0sIm5hbWVzIjpbIl90eXBlb2YiLCJvYmoiLCJTeW1ib2wiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwicHJvdG90eXBlIiwiJCIsIm1ldGhvZHMiLCJpbml0Iiwib3B0aW9ucyIsIm8iLCJleHRlbmQiLCJpdGVtcyIsIml0ZW1zT25QYWdlIiwicGFnZXMiLCJkaXNwbGF5ZWRQYWdlcyIsImVkZ2VzIiwiY3VycmVudFBhZ2UiLCJ1c2VBbmNob3JzIiwiaHJlZlRleHRQcmVmaXgiLCJocmVmVGV4dFN1ZmZpeCIsInByZXZUZXh0IiwibmV4dFRleHQiLCJlbGxpcHNlVGV4dCIsImVsbGlwc2VQYWdlU2V0IiwiY3NzU3R5bGUiLCJsaXN0U3R5bGUiLCJsYWJlbE1hcCIsInNlbGVjdE9uQ2xpY2siLCJuZXh0QXRGcm9udCIsImludmVydFBhZ2VPcmRlciIsInVzZVN0YXJ0RWRnZSIsInVzZUVuZEVkZ2UiLCJvblBhZ2VDbGljayIsInBhZ2VOdW1iZXIiLCJldmVudCIsIm9uSW5pdCIsInNlbGYiLCJ0aGlzIiwiTWF0aCIsImNlaWwiLCJoYWxmRGlzcGxheWVkIiwiZWFjaCIsImFkZENsYXNzIiwiZGF0YSIsIl9kcmF3IiwiY2FsbCIsInNlbGVjdFBhZ2UiLCJwYWdlIiwiX3NlbGVjdFBhZ2UiLCJwcmV2UGFnZSIsIm5leHRQYWdlIiwiZ2V0UGFnZXNDb3VudCIsInNldFBhZ2VzQ291bnQiLCJjb3VudCIsImdldEN1cnJlbnRQYWdlIiwiZGVzdHJveSIsImVtcHR5IiwiZHJhd1BhZ2UiLCJyZWRyYXciLCJkaXNhYmxlIiwiZGlzYWJsZWQiLCJlbmFibGUiLCJ1cGRhdGVJdGVtcyIsIm5ld0l0ZW1zIiwiX2dldFBhZ2VzIiwidXBkYXRlSXRlbXNPblBhZ2UiLCJnZXRJdGVtc09uUGFnZSIsImkiLCJpbnRlcnZhbCIsIl9nZXRJbnRlcnZhbCIsIiRwYW5lbCIsInByb3AiLCJhdHRyIiwiYXBwZW5kVG8iLCJfYXBwZW5kSXRlbSIsInRleHQiLCJjbGFzc2VzIiwiZW5kIiwiYmVnaW4iLCJtYXgiLCJhcHBlbmQiLCJzdGFydCIsIm1pbiIsIl9lbGxpcHNlQ2xpY2siLCJwYWdlSW5kZXgiLCJvcHRzIiwiJGxpbmsiLCIkbGlua1dyYXBwZXIiLCIkdWwiLCJmaW5kIiwibGVuZ3RoIiwiY2xpY2siLCIkZWxsaXAiLCJwYXJlbnQiLCJyZW1vdmVDbGFzcyIsIiR0aGlzIiwidmFsIiwicGFyc2VJbnQiLCJwcmV2IiwiaHRtbCIsImZvY3VzIiwic3RvcFByb3BhZ2F0aW9uIiwia2V5dXAiLCJ3aGljaCIsImJpbmQiLCJmbiIsInBhZ2luYXRpb24iLCJtZXRob2QiLCJjaGFyQXQiLCJhcHBseSIsIkFycmF5Iiwic2xpY2UiLCJhcmd1bWVudHMiLCJlcnJvciIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkFBQUEsYUFFQSxTQUFTQSxRQUFRQyxHQUFtVixPQUF0T0QsUUFBckQsbUJBQVhFLFFBQW9ELGlCQUFwQkEsT0FBT0MsU0FBbUMsU0FBaUJGLEdBQU8sY0FBY0EsR0FBMkIsU0FBaUJBLEdBQU8sT0FBT0EsR0FBeUIsbUJBQVhDLFFBQXlCRCxFQUFJRyxjQUFnQkYsUUFBVUQsSUFBUUMsT0FBT0csVUFBWSxnQkFBa0JKLElBQXlCQSxJQVFuWCxTQUFVSyxHQUVOLElBQUlDLEVBQVUsQ0FDVkMsS0FBTSxTQUFTQyxHQUNYLElBQUlDLEVBQUlKLEVBQUVLLE9BQU8sQ0FDYkMsTUFBTyxFQUNQQyxZQUFhLEVBQ2JDLE1BQU8sRUFDUEMsZUFBZ0IsRUFDaEJDLE1BQU8sRUFDUEMsWUFBYSxFQUNiQyxZQUFZLEVBQ1pDLGVBQWdCLFNBQ2hCQyxlQUFnQixHQUNoQkMsU0FBVSxPQUNWQyxTQUFVLE9BQ1ZDLFlBQWEsV0FDYkMsZ0JBQWdCLEVBQ2hCQyxTQUFVLGNBQ1ZDLFVBQVcsR0FDWEMsU0FBVSxHQUNWQyxlQUFlLEVBQ2ZDLGFBQWEsRUFDYkMsaUJBQWlCLEVBQ2pCQyxjQUFlLEVBQ2ZDLFlBQWEsRUFDYkMsWUFBYSxTQUFTQyxFQUFZQyxLQUls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QUVhLGdCQUc3QmtGLEtBQUssUUFBUSxTQUFTdEUsR0FDbkIsSUFBSThELEVBQU0zRixFQUFFZ0MsTUFBTTJELE1BS2xCLE1BSlksS0FBUkEsR0FDQTFGLEVBQVEwQyxZQUFZSCxLQUFLVCxFQUFNNEQsRUFBTSxHQUV6Q0osRUFBT3BDLFFBQVEyQyxLQUFLMUYsRUFBRWEsY0FDZixLQUduQixPQUFPLE9BTW5CakIsRUFBRW9HLEdBQUdDLFdBQWEsU0FBU0MsR0FHdkIsT0FBSXJHLEVBQVFxRyxJQUErQixLQUFwQkEsRUFBT0MsT0FBTyxHQUMxQnRHLEVBQVFxRyxHQUFRRSxNQUFNeEUsS0FBTXlFLE1BQU0xRyxVQUFVMkcsTUFBTWxFLEtBQUttRSxVQUFXLElBQ2hELFdBQWxCakgsUUFBTzRHLElBQXdCQSxPQUd0Q3RHLEVBQUU0RyxNQUFNLFVBQWFOLEVBQVMsd0NBRnZCckcsRUFBUUMsS0FBS3NHLE1BQU14RSxLQUFNMkUsWUE1WDVDLENBbVlHRSIsImZpbGUiOiJsaWJzL3BhZ2luYXRvci5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogc2ltcGxlUGFnaW5hdGlvbi5qcyB2MS42XG4gKiBBIHNpbXBsZSBqUXVlcnkgcGFnaW5hdGlvbiBwbHVnaW4uXG4gKiBodHRwOi8vZmxhdml1c21hdGlzLmdpdGh1Yi5jb20vc2ltcGxlUGFnaW5hdGlvbi5qcy9cbiAqXG4gKiBDb3B5cmlnaHQgMjAxMiwgRmxhdml1cyBNYXRpc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL2ZsYXZpdXNtYXRpcy5naXRodWIuY29tL2xpY2Vuc2UuaHRtbFxuICovXG5cbihmdW5jdGlvbigkKXtcblxuICAgIHZhciBtZXRob2RzID0ge1xuICAgICAgICBpbml0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgbyA9ICQuZXh0ZW5kKHtcbiAgICAgICAgICAgICAgICBpdGVtczogMSxcbiAgICAgICAgICAgICAgICBpdGVtc09uUGFnZTogMSxcbiAgICAgICAgICAgICAgICBwYWdlczogMCxcbiAgICAgICAgICAgICAgICBkaXNwbGF5ZWRQYWdlczogNSxcbiAgICAgICAgICAgICAgICBlZGdlczogMixcbiAgICAgICAgICAgICAgICBjdXJyZW50UGFnZTogMCxcbiAgICAgICAgICAgICAgICB1c2VBbmNob3JzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGhyZWZUZXh0UHJlZml4OiAnI3BhZ2UtJyxcbiAgICAgICAgICAgICAgICBocmVmVGV4dFN1ZmZpeDogJycsXG4gICAgICAgICAgICAgICAgcHJldlRleHQ6ICdQcmV2JyxcbiAgICAgICAgICAgICAgICBuZXh0VGV4dDogJ05leHQnLFxuICAgICAgICAgICAgICAgIGVsbGlwc2VUZXh0OiAnJmhlbGxpcDsnLFxuICAgICAgICAgICAgICAgIGVsbGlwc2VQYWdlU2V0OiB0cnVlLFxuICAgICAgICAgICAgICAgIGNzc1N0eWxlOiAnbGlnaHQtdGhlbWUnLFxuICAgICAgICAgICAgICAgIGxpc3RTdHlsZTogJycsXG4gICAgICAgICAgICAgICAgbGFiZWxNYXA6IFtdLFxuICAgICAgICAgICAgICAgIHNlbGVjdE9uQ2xpY2s6IHRydWUsXG4gICAgICAgICAgICAgICAgbmV4dEF0RnJvbnQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGludmVydFBhZ2VPcmRlcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgdXNlU3RhcnRFZGdlIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB1c2VFbmRFZGdlIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBvblBhZ2VDbGljazogZnVuY3Rpb24ocGFnZU51bWJlciwgZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2FsbGJhY2sgdHJpZ2dlcmVkIHdoZW4gYSBwYWdlIGlzIGNsaWNrZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gUGFnZSBudW1iZXIgaXMgZ2l2ZW4gYXMgYW4gb3B0aW9uYWwgcGFyYW1ldGVyXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDYWxsYmFjayB0cmlnZ2VyZWQgaW1tZWRpYXRlbHkgYWZ0ZXIgaW5pdGlhbGl6YXRpb25cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBvcHRpb25zIHx8IHt9KTtcblxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICBvLnBhZ2VzID0gby5wYWdlcyA/IG8ucGFnZXMgOiBNYXRoLmNlaWwoby5pdGVtcyAvIG8uaXRlbXNPblBhZ2UpID8gTWF0aC5jZWlsKG8uaXRlbXMgLyBvLml0ZW1zT25QYWdlKSA6IDE7XG4gICAgICAgICAgICBpZiAoby5jdXJyZW50UGFnZSlcbiAgICAgICAgICAgICAgICBvLmN1cnJlbnRQYWdlID0gby5jdXJyZW50UGFnZSAtIDE7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgby5jdXJyZW50UGFnZSA9ICFvLmludmVydFBhZ2VPcmRlciA/IDAgOiBvLnBhZ2VzIC0gMTtcbiAgICAgICAgICAgIG8uaGFsZkRpc3BsYXllZCA9IG8uZGlzcGxheWVkUGFnZXMgLyAyO1xuXG4gICAgICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5hZGRDbGFzcyhvLmNzc1N0eWxlICsgJyBzaW1wbGUtcGFnaW5hdGlvbicpLmRhdGEoJ3BhZ2luYXRpb24nLCBvKTtcbiAgICAgICAgICAgICAgICBtZXRob2RzLl9kcmF3LmNhbGwoc2VsZik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgby5vbkluaXQoKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2VsZWN0UGFnZTogZnVuY3Rpb24ocGFnZSkge1xuICAgICAgICAgICAgbWV0aG9kcy5fc2VsZWN0UGFnZS5jYWxsKHRoaXMsIHBhZ2UgLSAxKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9LFxuXG4gICAgICAgIHByZXZQYWdlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBvID0gdGhpcy5kYXRhKCdwYWdpbmF0aW9uJyk7XG4gICAgICAgICAgICBpZiAoIW8uaW52ZXJ0UGFnZU9yZGVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKG8uY3VycmVudFBhZ2UgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZHMuX3NlbGVjdFBhZ2UuY2FsbCh0aGlzLCBvLmN1cnJlbnRQYWdlIC0gMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoby5jdXJyZW50UGFnZSA8IG8ucGFnZXMgLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZHMuX3NlbGVjdFBhZ2UuY2FsbCh0aGlzLCBvLmN1cnJlbnRQYWdlICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgbmV4dFBhZ2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIG8gPSB0aGlzLmRhdGEoJ3BhZ2luYXRpb24nKTtcbiAgICAgICAgICAgIGlmICghby5pbnZlcnRQYWdlT3JkZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoby5jdXJyZW50UGFnZSA8IG8ucGFnZXMgLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZHMuX3NlbGVjdFBhZ2UuY2FsbCh0aGlzLCBvLmN1cnJlbnRQYWdlICsgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoby5jdXJyZW50UGFnZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kcy5fc2VsZWN0UGFnZS5jYWxsKHRoaXMsIG8uY3VycmVudFBhZ2UgLSAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRQYWdlc0NvdW50OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEoJ3BhZ2luYXRpb24nKS5wYWdlcztcbiAgICAgICAgfSxcblxuICAgICAgICBzZXRQYWdlc0NvdW50OiBmdW5jdGlvbihjb3VudCkge1xuICAgICAgICAgICAgdGhpcy5kYXRhKCdwYWdpbmF0aW9uJykucGFnZXMgPSBjb3VudDtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRDdXJyZW50UGFnZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YSgncGFnaW5hdGlvbicpLmN1cnJlbnRQYWdlICsgMTtcbiAgICAgICAgfSxcblxuICAgICAgICBkZXN0cm95OiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdGhpcy5lbXB0eSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZHJhd1BhZ2U6IGZ1bmN0aW9uIChwYWdlKSB7XG4gICAgICAgICAgICB2YXIgbyA9IHRoaXMuZGF0YSgncGFnaW5hdGlvbicpO1xuICAgICAgICAgICAgby5jdXJyZW50UGFnZSA9IHBhZ2UgLSAxO1xuICAgICAgICAgICAgdGhpcy5kYXRhKCdwYWdpbmF0aW9uJywgbyk7XG4gICAgICAgICAgICBtZXRob2RzLl9kcmF3LmNhbGwodGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSxcblxuICAgICAgICByZWRyYXc6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBtZXRob2RzLl9kcmF3LmNhbGwodGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSxcblxuICAgICAgICBkaXNhYmxlOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIG8gPSB0aGlzLmRhdGEoJ3BhZ2luYXRpb24nKTtcbiAgICAgICAgICAgIG8uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5kYXRhKCdwYWdpbmF0aW9uJywgbyk7XG4gICAgICAgICAgICBtZXRob2RzLl9kcmF3LmNhbGwodGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSxcblxuICAgICAgICBlbmFibGU6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgbyA9IHRoaXMuZGF0YSgncGFnaW5hdGlvbicpO1xuICAgICAgICAgICAgby5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5kYXRhKCdwYWdpbmF0aW9uJywgbyk7XG4gICAgICAgICAgICBtZXRob2RzLl9kcmF3LmNhbGwodGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVJdGVtczogZnVuY3Rpb24gKG5ld0l0ZW1zKSB7XG4gICAgICAgICAgICB2YXIgbyA9IHRoaXMuZGF0YSgncGFnaW5hdGlvbicpO1xuICAgICAgICAgICAgby5pdGVtcyA9IG5ld0l0ZW1zO1xuICAgICAgICAgICAgby5wYWdlcyA9IG1ldGhvZHMuX2dldFBhZ2VzKG8pO1xuICAgICAgICAgICAgdGhpcy5kYXRhKCdwYWdpbmF0aW9uJywgbyk7XG4gICAgICAgICAgICBtZXRob2RzLl9kcmF3LmNhbGwodGhpcyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlSXRlbXNPblBhZ2U6IGZ1bmN0aW9uIChpdGVtc09uUGFnZSkge1xuICAgICAgICAgICAgdmFyIG8gPSB0aGlzLmRhdGEoJ3BhZ2luYXRpb24nKTtcbiAgICAgICAgICAgIG8uaXRlbXNPblBhZ2UgPSBpdGVtc09uUGFnZTtcbiAgICAgICAgICAgIG8ucGFnZXMgPSBtZXRob2RzLl9nZXRQYWdlcyhvKTtcbiAgICAgICAgICAgIHRoaXMuZGF0YSgncGFnaW5hdGlvbicsIG8pO1xuICAgICAgICAgICAgbWV0aG9kcy5fc2VsZWN0UGFnZS5jYWxsKHRoaXMsIDApO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0SXRlbXNPblBhZ2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YSgncGFnaW5hdGlvbicpLml0ZW1zT25QYWdlO1xuICAgICAgICB9LFxuXG4gICAgICAgIF9kcmF3OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhclx0byA9IHRoaXMuZGF0YSgncGFnaW5hdGlvbicpLFxuICAgICAgICAgICAgICAgIGludGVydmFsID0gbWV0aG9kcy5fZ2V0SW50ZXJ2YWwobyksXG4gICAgICAgICAgICAgICAgaSxcbiAgICAgICAgICAgICAgICB0YWdOYW1lO1xuXG4gICAgICAgICAgICBtZXRob2RzLmRlc3Ryb3kuY2FsbCh0aGlzKTtcblxuICAgICAgICAgICAgdGFnTmFtZSA9ICh0eXBlb2YgdGhpcy5wcm9wID09PSAnZnVuY3Rpb24nKSA/IHRoaXMucHJvcCgndGFnTmFtZScpIDogdGhpcy5hdHRyKCd0YWdOYW1lJyk7XG5cbiAgICAgICAgICAgIHZhciAkcGFuZWwgPSB0YWdOYW1lID09PSAnVUwnID8gdGhpcyA6ICQoJzx1bCcgKyAoby5saXN0U3R5bGUgPyAnIGNsYXNzPVwiJyArIG8ubGlzdFN0eWxlICsgJ1wiJyA6ICcnKSArICc+PC91bD4nKS5hcHBlbmRUbyh0aGlzKTtcblxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgUHJldiBsaW5rXG4gICAgICAgICAgICBpZiAoby5wcmV2VGV4dCkge1xuICAgICAgICAgICAgICAgIG1ldGhvZHMuX2FwcGVuZEl0ZW0uY2FsbCh0aGlzLCAhby5pbnZlcnRQYWdlT3JkZXIgPyBvLmN1cnJlbnRQYWdlIC0gMSA6IG8uY3VycmVudFBhZ2UgKyAxLCB7dGV4dDogby5wcmV2VGV4dCwgY2xhc3NlczogJ3ByZXYnfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIE5leHQgbGluayAoaWYgb3B0aW9uIHNldCBmb3IgYXQgZnJvbnQpXG4gICAgICAgICAgICBpZiAoby5uZXh0VGV4dCAmJiBvLm5leHRBdEZyb250KSB7XG4gICAgICAgICAgICAgICAgbWV0aG9kcy5fYXBwZW5kSXRlbS5jYWxsKHRoaXMsICFvLmludmVydFBhZ2VPcmRlciA/IG8uY3VycmVudFBhZ2UgKyAxIDogby5jdXJyZW50UGFnZSAtIDEsIHt0ZXh0OiBvLm5leHRUZXh0LCBjbGFzc2VzOiAnbmV4dCd9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgc3RhcnQgZWRnZXNcbiAgICAgICAgICAgIGlmICghby5pbnZlcnRQYWdlT3JkZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJ2YWwuc3RhcnQgPiAwICYmIG8uZWRnZXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKG8udXNlU3RhcnRFZGdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kID0gTWF0aC5taW4oby5lZGdlcywgaW50ZXJ2YWwuc3RhcnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kcy5fYXBwZW5kSXRlbS5jYWxsKHRoaXMsIGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvLmVkZ2VzIDwgaW50ZXJ2YWwuc3RhcnQgJiYgKGludGVydmFsLnN0YXJ0IC0gby5lZGdlcyAhPSAxKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHBhbmVsLmFwcGVuZCgnPGxpIGNsYXNzPVwiZGlzYWJsZWRcIj48c3BhbiBjbGFzcz1cImVsbGlwc2VcIj4nICsgby5lbGxpcHNlVGV4dCArICc8L3NwYW4+PC9saT4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnRlcnZhbC5zdGFydCAtIG8uZWRnZXMgPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kcy5fYXBwZW5kSXRlbS5jYWxsKHRoaXMsIG8uZWRnZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJ2YWwuZW5kIDwgby5wYWdlcyAmJiBvLmVkZ2VzID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZihvLnVzZVN0YXJ0RWRnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJlZ2luID0gTWF0aC5tYXgoby5wYWdlcyAtIG8uZWRnZXMsIGludGVydmFsLmVuZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSBvLnBhZ2VzIC0gMTsgaSA+PSBiZWdpbjsgaS0tKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kcy5fYXBwZW5kSXRlbS5jYWxsKHRoaXMsIGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG8ucGFnZXMgLSBvLmVkZ2VzID4gaW50ZXJ2YWwuZW5kICYmIChvLnBhZ2VzIC0gby5lZGdlcyAtIGludGVydmFsLmVuZCAhPSAxKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHBhbmVsLmFwcGVuZCgnPGxpIGNsYXNzPVwiZGlzYWJsZWRcIj48c3BhbiBjbGFzcz1cImVsbGlwc2VcIj4nICsgby5lbGxpcHNlVGV4dCArICc8L3NwYW4+PC9saT4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvLnBhZ2VzIC0gby5lZGdlcyAtIGludGVydmFsLmVuZCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RzLl9hcHBlbmRJdGVtLmNhbGwodGhpcywgaW50ZXJ2YWwuZW5kKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgaW50ZXJ2YWwgbGlua3NcbiAgICAgICAgICAgIGlmICghby5pbnZlcnRQYWdlT3JkZXIpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSBpbnRlcnZhbC5zdGFydDsgaSA8IGludGVydmFsLmVuZDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZHMuX2FwcGVuZEl0ZW0uY2FsbCh0aGlzLCBpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IGludGVydmFsLmVuZCAtIDE7IGkgPj0gaW50ZXJ2YWwuc3RhcnQ7IGktLSkge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2RzLl9hcHBlbmRJdGVtLmNhbGwodGhpcywgaSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBHZW5lcmF0ZSBlbmQgZWRnZXNcbiAgICAgICAgICAgIGlmICghby5pbnZlcnRQYWdlT3JkZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJ2YWwuZW5kIDwgby5wYWdlcyAmJiBvLmVkZ2VzID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoby5wYWdlcyAtIG8uZWRnZXMgPiBpbnRlcnZhbC5lbmQgJiYgKG8ucGFnZXMgLSBvLmVkZ2VzIC0gaW50ZXJ2YWwuZW5kICE9IDEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkcGFuZWwuYXBwZW5kKCc8bGkgY2xhc3M9XCJkaXNhYmxlZFwiPjxzcGFuIGNsYXNzPVwiZWxsaXBzZVwiPicgKyBvLmVsbGlwc2VUZXh0ICsgJzwvc3Bhbj48L2xpPicpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG8ucGFnZXMgLSBvLmVkZ2VzIC0gaW50ZXJ2YWwuZW5kID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZHMuX2FwcGVuZEl0ZW0uY2FsbCh0aGlzLCBpbnRlcnZhbC5lbmQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKG8udXNlRW5kRWRnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJlZ2luID0gTWF0aC5tYXgoby5wYWdlcyAtIG8uZWRnZXMsIGludGVydmFsLmVuZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSBiZWdpbjsgaSA8IG8ucGFnZXM7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZHMuX2FwcGVuZEl0ZW0uY2FsbCh0aGlzLCBpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGludGVydmFsLnN0YXJ0ID4gMCAmJiBvLmVkZ2VzID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoby5lZGdlcyA8IGludGVydmFsLnN0YXJ0ICYmIChpbnRlcnZhbC5zdGFydCAtIG8uZWRnZXMgIT0gMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRwYW5lbC5hcHBlbmQoJzxsaSBjbGFzcz1cImRpc2FibGVkXCI+PHNwYW4gY2xhc3M9XCJlbGxpcHNlXCI+JyArIG8uZWxsaXBzZVRleHQgKyAnPC9zcGFuPjwvbGk+Jyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW50ZXJ2YWwuc3RhcnQgLSBvLmVkZ2VzID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZHMuX2FwcGVuZEl0ZW0uY2FsbCh0aGlzLCBvLmVkZ2VzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmKG8udXNlRW5kRWRnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVuZCA9IE1hdGgubWluKG8uZWRnZXMsIGludGVydmFsLnN0YXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IGVuZCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kcy5fYXBwZW5kSXRlbS5jYWxsKHRoaXMsIGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBHZW5lcmF0ZSBOZXh0IGxpbmsgKHVubGVzcyBvcHRpb24gaXMgc2V0IGZvciBhdCBmcm9udClcbiAgICAgICAgICAgIGlmIChvLm5leHRUZXh0ICYmICFvLm5leHRBdEZyb250KSB7XG4gICAgICAgICAgICAgICAgbWV0aG9kcy5fYXBwZW5kSXRlbS5jYWxsKHRoaXMsICFvLmludmVydFBhZ2VPcmRlciA/IG8uY3VycmVudFBhZ2UgKyAxIDogby5jdXJyZW50UGFnZSAtIDEsIHt0ZXh0OiBvLm5leHRUZXh0LCBjbGFzc2VzOiAnbmV4dCd9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG8uZWxsaXBzZVBhZ2VTZXQgJiYgIW8uZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBtZXRob2RzLl9lbGxpcHNlQ2xpY2suY2FsbCh0aGlzLCAkcGFuZWwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0sXG5cbiAgICAgICAgX2dldFBhZ2VzOiBmdW5jdGlvbihvKSB7XG4gICAgICAgICAgICB2YXIgcGFnZXMgPSBNYXRoLmNlaWwoby5pdGVtcyAvIG8uaXRlbXNPblBhZ2UpO1xuICAgICAgICAgICAgcmV0dXJuIHBhZ2VzIHx8IDE7XG4gICAgICAgIH0sXG5cbiAgICAgICAgX2dldEludGVydmFsOiBmdW5jdGlvbihvKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN0YXJ0OiBNYXRoLmNlaWwoby5jdXJyZW50UGFnZSA+IG8uaGFsZkRpc3BsYXllZCA/IE1hdGgubWF4KE1hdGgubWluKG8uY3VycmVudFBhZ2UgLSBvLmhhbGZEaXNwbGF5ZWQsIChvLnBhZ2VzIC0gby5kaXNwbGF5ZWRQYWdlcykpLCAwKSA6IDApLFxuICAgICAgICAgICAgICAgIGVuZDogTWF0aC5jZWlsKG8uY3VycmVudFBhZ2UgPiBvLmhhbGZEaXNwbGF5ZWQgPyBNYXRoLm1pbihvLmN1cnJlbnRQYWdlICsgby5oYWxmRGlzcGxheWVkLCBvLnBhZ2VzKSA6IE1hdGgubWluKG8uZGlzcGxheWVkUGFnZXMsIG8ucGFnZXMpKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcblxuICAgICAgICBfYXBwZW5kSXRlbTogZnVuY3Rpb24ocGFnZUluZGV4LCBvcHRzKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXMsIG9wdGlvbnMsICRsaW5rLCBvID0gc2VsZi5kYXRhKCdwYWdpbmF0aW9uJyksICRsaW5rV3JhcHBlciA9ICQoJzxsaT48L2xpPicpLCAkdWwgPSBzZWxmLmZpbmQoJ3VsJyk7XG5cbiAgICAgICAgICAgIHBhZ2VJbmRleCA9IHBhZ2VJbmRleCA8IDAgPyAwIDogKHBhZ2VJbmRleCA8IG8ucGFnZXMgPyBwYWdlSW5kZXggOiBvLnBhZ2VzIC0gMSk7XG5cbiAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgdGV4dDogcGFnZUluZGV4ICsgMSxcbiAgICAgICAgICAgICAgICBjbGFzc2VzOiAnJ1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKG8ubGFiZWxNYXAubGVuZ3RoICYmIG8ubGFiZWxNYXBbcGFnZUluZGV4XSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMudGV4dCA9IG8ubGFiZWxNYXBbcGFnZUluZGV4XTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKG9wdGlvbnMsIG9wdHMgfHwge30pO1xuXG4gICAgICAgICAgICBpZiAocGFnZUluZGV4ID09IG8uY3VycmVudFBhZ2UgfHwgby5kaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIGlmIChvLmRpc2FibGVkIHx8IG9wdGlvbnMuY2xhc3NlcyA9PT0gJ3ByZXYnIHx8IG9wdGlvbnMuY2xhc3NlcyA9PT0gJ25leHQnKSB7XG4gICAgICAgICAgICAgICAgICAgICRsaW5rV3JhcHBlci5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkbGlua1dyYXBwZXIuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkbGluayA9ICQoJzxzcGFuIGNsYXNzPVwiY3VycmVudFwiPicgKyAob3B0aW9ucy50ZXh0KSArICc8L3NwYW4+Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChvLnVzZUFuY2hvcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgJGxpbmsgPSAkKCc8YSBocmVmPVwiJyArIG8uaHJlZlRleHRQcmVmaXggKyAocGFnZUluZGV4ICsgMSkgKyBvLmhyZWZUZXh0U3VmZml4ICsgJ1wiIGNsYXNzPVwicGFnZS1saW5rXCI+JyArIChvcHRpb25zLnRleHQpICsgJzwvYT4nKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkbGluayA9ICQoJzxzcGFuID4nICsgKG9wdGlvbnMudGV4dCkgKyAnPC9zcGFuPicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkbGluay5jbGljayhmdW5jdGlvbihldmVudCl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtZXRob2RzLl9zZWxlY3RQYWdlLmNhbGwoc2VsZiwgcGFnZUluZGV4LCBldmVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmNsYXNzZXMpIHtcbiAgICAgICAgICAgICAgICAkbGluay5hZGRDbGFzcyhvcHRpb25zLmNsYXNzZXMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkbGlua1dyYXBwZXIuYXBwZW5kKCRsaW5rKTtcblxuICAgICAgICAgICAgaWYgKCR1bC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAkdWwuYXBwZW5kKCRsaW5rV3JhcHBlcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYuYXBwZW5kKCRsaW5rV3JhcHBlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgX3NlbGVjdFBhZ2U6IGZ1bmN0aW9uKHBhZ2VJbmRleCwgZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBvID0gdGhpcy5kYXRhKCdwYWdpbmF0aW9uJyk7XG4gICAgICAgICAgICBvLmN1cnJlbnRQYWdlID0gcGFnZUluZGV4O1xuICAgICAgICAgICAgaWYgKG8uc2VsZWN0T25DbGljaykge1xuICAgICAgICAgICAgICAgIG1ldGhvZHMuX2RyYXcuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvLm9uUGFnZUNsaWNrKHBhZ2VJbmRleCArIDEsIGV2ZW50KTtcbiAgICAgICAgfSxcblxuXG4gICAgICAgIF9lbGxpcHNlQ2xpY2s6IGZ1bmN0aW9uKCRwYW5lbCkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICAgICAgICAgIG8gPSB0aGlzLmRhdGEoJ3BhZ2luYXRpb24nKSxcbiAgICAgICAgICAgICAgICAkZWxsaXAgPSAkcGFuZWwuZmluZCgnLmVsbGlwc2UnKTtcbiAgICAgICAgICAgICRlbGxpcC5hZGRDbGFzcygnY2xpY2thYmxlJykucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAkZWxsaXAuY2xpY2soZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW8uZGlzYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gKHBhcnNlSW50KCR0aGlzLnBhcmVudCgpLnByZXYoKS50ZXh0KCksIDEwKSB8fCAwKSArIDE7XG4gICAgICAgICAgICAgICAgICAgICR0aGlzXG4gICAgICAgICAgICAgICAgICAgICAgICAuaHRtbCgnPGlucHV0IHR5cGU9XCJudW1iZXJcIiBtaW49XCIxXCIgbWF4PVwiJyArIG8ucGFnZXMgKyAnXCIgc3RlcD1cIjFcIiB2YWx1ZT1cIicgKyB2YWwgKyAnXCI+JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCdpbnB1dCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAuZm9jdXMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNsaWNrKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJldmVudCBpbnB1dCBudW1iZXIgYXJyb3dzIGZyb20gYnViYmxpbmcgYSBjbGljayBldmVudCBvbiAkZWxsaXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAua2V5dXAoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gJCh0aGlzKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDEzICYmIHZhbCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW50ZXIgdG8gYWNjZXB0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsPjApJiYodmFsPD1vLnBhZ2VzKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZHMuX3NlbGVjdFBhZ2UuY2FsbChzZWxmLCB2YWwgLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LndoaWNoID09PSAyNykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlc2NhcGUgdG8gY2FuY2VsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlbGxpcC5lbXB0eSgpLmh0bWwoby5lbGxpcHNlVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5iaW5kKCdibHVyJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gJCh0aGlzKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2RzLl9zZWxlY3RQYWdlLmNhbGwoc2VsZiwgdmFsIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlbGxpcC5lbXB0eSgpLmh0bWwoby5lbGxpcHNlVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgJC5mbi5wYWdpbmF0aW9uID0gZnVuY3Rpb24obWV0aG9kKSB7XG5cbiAgICAgICAgLy8gTWV0aG9kIGNhbGxpbmcgbG9naWNcbiAgICAgICAgaWYgKG1ldGhvZHNbbWV0aG9kXSAmJiBtZXRob2QuY2hhckF0KDApICE9ICdfJykge1xuICAgICAgICAgICAgcmV0dXJuIG1ldGhvZHNbbWV0aG9kXS5hcHBseSh0aGlzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbWV0aG9kID09PSAnb2JqZWN0JyB8fCAhbWV0aG9kKSB7XG4gICAgICAgICAgICByZXR1cm4gbWV0aG9kcy5pbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkLmVycm9yKCdNZXRob2QgJyArICBtZXRob2QgKyAnIGRvZXMgbm90IGV4aXN0IG9uIGpRdWVyeS5wYWdpbmF0aW9uJyk7XG4gICAgICAgIH1cblxuICAgIH07XG5cbn0pKGpRdWVyeSk7Il19
